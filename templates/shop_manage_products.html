<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    {% load static %}
    <link rel="stylesheet" href="{% static '商家_files/head.css' %}">
    <script src="{% static '首页_files/jquery.min.js.下载' %}"></script>
    <script src="{% static '首页_files/carts.js.下载' %}"></script>

    <style>
        @keyframes fadeInOut {
            0% {
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }

        .classes {
            background: #f4f4f4;
            padding: 10px 0;
            margin-bottom: 20px;
            border-bottom: 1px solid #ccc;
        }

        .no-products-animation {
            display: none;
            animation: fadeInOut 3s ease infinite;
            position: fixed; /* 使用 fixed 定位 */
            top: 50%; /* 从顶部开始的位置 */
            left: 50%; /* 从左边开始的位置 */
            transform: translate(-50%, -50%); /* 使用 transform 居中 */
        }

        .no-products-animation p {
            text-align: center;
            font-size: 5em; /* 调整为您需要的大小 */
            color: red;
        }

        .classes-items {
            text-align: center;
        }

        .items {
            text-align: center;
        }

        th {
            padding: 25px 0; /* 我们保留了原始的内边距 */
            /* 定义每个标题的具体宽度 */
            width: 120px; /* 选择列 */
        }
        

        .pagination {
            text-align: center; /* 居中分页控件 */
            margin-top: 20px; /* 顶部距离，可根据需要调整 */
            margin-bottom: 20px; /* 底部距离，可根据需要调整 */
        }


        .pagination .step-links a,
        .pagination .step-links span {
            display: inline-block; /* 使链接和当前页信息能够在同一行显示 */
            margin-right: 5px; /* 为链接和当前页信息等元素之间添加间隔 */
            padding: 5px 10px; /* 内间距，可根据需要调整 */
            text-decoration: none; /* 移除超链接的下划线 */
            border: 1px solid #ddd; /* 加边框，可根据需要调整或移除 */
            color: #333; /* 文字颜色，可根据需要调整 */
        }

        .pagination .step-links span.current {
            font-weight: bold; /* 当前页加粗显示 */
        }

        /* 模态框的基本样式 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.4);
            padding-top: 60px;
        }

        /* 模态框内容 */
        .modal-content {
            background-color: #fcfcfc;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 350px; /* 可以根据需要调整宽度 */
            border-radius: 5px;
            text-align: center;
        }

        /* 关闭按钮 */
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* 确定和取消按钮样式 */
        .modal-actions button {
            padding: 10px 20px;
            margin: 10px;
            cursor: pointer;
        }

        .modal-actions button:hover {
            opacity: 0.8;
        }

    </style>
</head>
<body>

<div class="head">
    <div class="head-in">
        <ul class="options">
            <li class="sub"><a href="/user/userorder">我的订单</a></li>
            <li class="sub"><a href="/user/userserve">客户服务</a></li>
        </ul>
        <div class="register"><a href="{% url 'userprofile' %}">查看个人信息</a></div>
        <div class="register"><a href="{% url 'logout' %}">退出登录</a></div>
        <div class="hello">欢迎您！欢迎来到数码产品网上交易平台</div>
    </div>
</div>
<div class="search">
    <div class="input">
        <input type="" name="" value="请输入想找的宝贝">
        <img src="{% static '首页_files/1_06.png' %}">
    </div>
</div>
<div class="classes">
    <ul class="classes-items">

        <li class="items"><a href="http://127.0.0.1:8000/shop/shoppage/myproducts/?category_id=0">我的商品</a></li>
        <li class="items"><a href="http://127.0.0.1:8000/shop/shoppage/manage_products/">管理商品</a></li>
        <li class="items"><a href="http://127.0.0.1:8000/shop/shoppage/shop_order/">我的订单</a></li>
        <li class="items"><a href="http://127.0.0.1:8000/shop/shoppage/sales_analysis/">销售分析</a></li>
    </ul>
    <ul class="classes-items">
        <li class="items"><a
                href="http://127.0.0.1:8000/shop/shoppage/manage_products/?category_id=0">全部商品</a></li>
        <li class="items"><a
                href="http://127.0.0.1:8000/shop/shoppage/manage_products/?category_id=1">个人电脑和配件</a></li>
        <li class="items"><a
                href="http://127.0.0.1:8000/shop/shoppage/manage_products/?category_id=2">移动设备</a></li>
        <li class="items"><a
                href="http://127.0.0.1:8000/shop/shoppage/manage_products/?category_id=3">家用电子产品</a></li>
        <li class="items"><a
                href="http://127.0.0.1:8000/shop/shoppage/manage_products/?category_id=4">厨房电子设备</a></li>
        <li class="items"><a
                href="http://127.0.0.1:8000/shop/shoppage/manage_products/?category_id=5">办公设备</a></li>
        <li class="items"><a
                href="http://127.0.0.1:8000/shop/shoppage/manage_products/?category_id=6">汽车电子设备</a></li>
        <li class="items"><a
                href="http://127.0.0.1:8000/shop/shoppage/manage_products/?category_id=7">网络和通信设备</a></li>
        <li class="items"><a
                href="http://127.0.0.1:8000/shop/shoppage/manage_products/?category_id=8">可穿戴设备</a></li>
        <li class="items"><a
                href="http://127.0.0.1:8000/shop/shoppage/manage_products/?category_id=9">智能家居设备</a></li>
    </ul>

    <!-- 在这里添加一个 '增加商品' 的按钮 -->
    <div class="add-product-button">
        <a href="{% url 'add_product' %}" class="btn btn-success">增加商品</a>
    </div>

    {% if shop_products %}
        <table>
            <tr>
{#                <th>选择</th>#}
                <th>商品名称</th>
                <th>图片</th>
                <th>类别</th>
                <th>品牌</th>
                <th>价格</th>
                <th>描述</th>
                <th>状态</th>
                <th>库存</th>
                <th>原始价格</th>
                <th>折扣</th>
                <th>现在价格</th>
                <th>详情</th>
                <th>修改</th>
                <th>删除</th>
            </tr>
            {% for shop_product in shop_products %}
                <tr>
{#                    <td>#}
{#                        <input type="checkbox" id="product_selection_{{ shop_product.shop_product_id }}"#}
{#                               name="product_selection">#}
{#                        <label for="product_selection_{{ shop_product.shop_product_id }}"></label>#}
{#                    </td>#}
                    <td>{{ shop_product.product.p_name }}</td>
                    <td><img src="{% static '商品图片/'|add:shop_product.product_image_url %}" alt="商品图片"
                             width="100px"
                             height="100px"></td>
                    <td>{{ shop_product.product.p_type.category_name }}</td>
                    <td>{{ shop_product.product.brand }}</td>
                    <td>{{ shop_product.current_price }}</td>
                    <td>{{ shop_product.product_desc }}</td>
                    <td>{{ shop_product.product_status }}</td>
                    <td>{{ shop_product.stock_quantity }}</td>
                    <td>{{ shop_product.original_price }}</td>
                    <td>{{ shop_product.discount }}%</td>
                    <td>{{ shop_product.current_price }}</td>
                    <td>
                        <!-- 新增的详情按钮 -->
                        <a href="{% url 'shop_productdetails' shop_product.shop_product_id %}"
                           class="btn btn-info">详情</a>
                    </td>
                    <td>
                        <!-- 修改按钮 -->
                        <a href="{% url 'edit_product' shop_product.shop_product_id %}"
                           class="btn btn-primary">修改</a>
                    </td>
                    <td>
                        <!-- 删除按钮 -->
                        <a href="javascript:void(0);" onclick="confirmDelete({{ shop_product.shop_product_id }});"
                           class="btn btn-danger">删除</a>
                    </td>
                </tr>
            {% endfor %}
        </table>
        <div class="pagination">
        <span class="step-links">
            {% if shop_products.has_previous %}
                <a href="?page=1">&laquo; 第一页</a>
                <a href="?page={{ shop_products.previous_page_number }}">上一页</a>
            {% endif %}

            <span class="current">
                第 {{ shop_products.number }} / {{ shop_products.paginator.num_pages }} 页
            </span>

            {% if shop_products.has_next %}
                <a href="?page={{ shop_products.next_page_number }}">下一页</a>
                <a href="?page={{ shop_products.paginator.num_pages }}">最后一页 &raquo;</a>
            {% endif %}
        </span>

            <!-- 页码跳转表单 -->
            <form action="" method="get" style="display: inline-block;">
                <!-- 如果有其他查询参数，务必在这里添加相应的input hidden字段 -->
                <input type="number" name="page" min="1" max="{{ shop_products.paginator.num_pages }}" required
                       placeholder="页码" style="margin-left: 10px;">
                <input type="submit" value="跳转">
            </form>
        </div>
    {% else %}
        <div class="no-products-animation">
            <p>还没有商品哦！</p>
        </div>
    {% endif %}
</div>
<!-- 模态框 -->
<div id="confirmModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <p>你确定要删除这个商品吗？此操作不可恢复！</p>
        <div class="modal-actions">
            <button id="confirmDelete">确定</button>
            <button id="cancelDelete">取消</button>
        </div>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelector('.no-products-animation').style.display = 'block';
    });

    // 获取模态框元素
    var modal = document.getElementById('confirmModal');
    var span = document.getElementsByClassName("close")[0];
    var confirmBtn = document.getElementById('confirmDelete');
    var cancelBtn = document.getElementById('cancelDelete');

    // 点击删除按钮时，显示模态框
    function confirmDelete(productId) {
        // 在显示模态框之前，为确定按钮绑定删除的动作
        confirmBtn.onclick = function () {
            window.location.href = "/shop/shoppage/manage_products/delete_product/" + productId + "/";
        };
        // 显示模态框
        modal.style.display = "block";
    }

    // 点击关闭按钮或取消按钮关闭模态框
    span.onclick = function () {
        modal.style.display = "none";
    }

    cancelBtn.onclick = function () {
        modal.style.display = "none";
    }

    // 点击窗口外区域关闭模态框
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
    // 调整分页样式的代码可能需要移至更适宜的位置，以避免与其他脚本冲突
    $('#pager').css({'text-align': 'center', 'font-size': '16px', 'overflow': 'hidden', 'margin-top': '10px'});
    $('#pager a').css({'display': 'inline-block', 'padding': '5px', 'margin': '5px'});

</script>
</body>
</html>