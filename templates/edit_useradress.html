<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    {% load static %}
    <title>é¦–é¡µ</title>
    <link rel="stylesheet" href="{% static 'é¦–é¡µ_files/login.css' %}">
    <link rel="stylesheet" href="{% static 'é¦–é¡µ_files/index.css' %}">
    <link rel="stylesheet" href="{% static 'é¦–é¡µ_files/detail.css' %}">
    <link rel="stylesheet" href="{% static 'é¦–é¡µ_files/carts.css' %}">
    <link rel="stylesheet" href="{% static 'é¦–é¡µ_files/reset.css' %}">
    <link rel="stylesheet" href="{% static 'é¦–é¡µ_files/address.css' %}">
    <script src="../static/é¦–é¡µ_files/jquery.min.js.ä¸‹è½½"></script>
    <script src="../static/é¦–é¡µ_files/carts.js.ä¸‹è½½"></script>
    <meta charset="UTF-8">
    <title>ğŸ“ åœ°å€ç®¡ç†</title>

</head>
<body>
<div class="head">
    <div class="head-in">
        <ul class="options">
            <li class="sub"><a href="/user/userorder">æˆ‘çš„è®¢å•</a></li>
            <li class="sub"><a href="/user/userserve">å®¢æˆ·æœåŠ¡</a></li>
            <li class="sub"><a href="/user/usercart">æˆ‘çš„è´­ç‰©è½¦</a></li>
        </ul>
        <div class="register"><a href="{% url 'userprofile' %}">æŸ¥çœ‹ä¸ªäººä¿¡æ¯</a></div>
        <div class="register"><a href="{% url 'logout' %}">é€€å‡ºç™»å½•</a></div>
    </div>
</div>
<div class="search">
    <h1>ğŸ“ åœ°å€ç®¡ç†</h1>
    <form action="{% url 'search_products' %}" method="get" id="search-form" class="input">
    <input type="text" name="q" value="è¯·è¾“å…¥æƒ³æ‰¾çš„å®è´" style="color: #aaa;" onfocus="if (this.value == 'è¯·è¾“å…¥æƒ³æ‰¾çš„å®è´') {this.value = ''; this.style.color = '#000';}" onblur="if (this.value == '') {this.value = 'è¯·è¾“å…¥æƒ³æ‰¾çš„å®è´'; this.style.color = '#aaa';}">
    <img src="{% static 'é¦–é¡µ_files/1_06.png' %}" onclick="document.getElementById('search-form').submit();" style="cursor: pointer;">
</form>
</div>
    <form method="POST" action="{% url 'address_management' %}">
        {% csrf_token %}
        <div class="address-list">
            <h2>ğŸ  é»˜è®¤åœ°å€</h2>
            <div class="address-item default-address">
                <textarea class="address-text" name="default_address">{{ default_address }}</textarea>
            </div>

            {% if other_addresses %}
                <h2>ğŸ“œ å…¶ä»–åœ°å€</h2>
                {% for address in other_addresses %}
                    <div class="address-item">
                        <textarea class="address-text" name="address_{{ address.address_id }}">{{ address.address }}</textarea>
                        <div class="address-actions">
                            <a href="{% url 'set_default_address' address.address_id %}">
                                <span class="icon">â­</span>è®¾ä¸ºé»˜è®¤
                            </a>
                            <a href="{% url 'delete_address' address.address_id %}">
                                <span class="icon">ğŸ—‘ï¸</span>åˆ é™¤
                            </a>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>

        <div class="add-address">
            <input type="text" name="new_address" placeholder="âœï¸ è¾“å…¥æ–°åœ°å€" />
        </div>

        <div class="button-group">
            <button type="submit">
                <span class="icon">â•</span>æ·»åŠ åŠä¿å­˜
            </button>
            <button type="button" onclick="goBack()">
                <span class="icon">â¬…ï¸</span>è¿”å›
            </button>
        </div>
    </form>

    <script>
        function addAddress() {
            var newAddress = document.querySelector('input[name="new_address"]').value;
            if (newAddress) {
                var addressItem = document.createElement('div');
                addressItem.className = 'address-item';

                var textarea = document.createElement('textarea');
                textarea.className = 'address-text';
                textarea.name = 'new_address';
                textarea.textContent = newAddress;
                addressItem.appendChild(textarea);

                var addressList = document.querySelector('.address-list');
                addressList.appendChild(addressItem);

                document.querySelector('input[name="new_address"]').value = '';
            }
        }

        function goBack() {
            window.location.href = "{% url 'userprofile' %}"
        }
    </script>
</body>
</html>
